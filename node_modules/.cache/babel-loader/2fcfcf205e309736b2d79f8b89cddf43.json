{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\Project\\\\ReactJS\\\\MejaKita - Chatbot\\\\Chatbot\\\\src\\\\components\\\\MultiSearch.js\";\nimport React, { Component } from 'react';\nimport { Loading } from 'react-simple-chatbot'; // import { bc, bc_topic, dpr, dpr_topic, topic, keyword_grade, keyword_major } from '../dummy/data.json';\n\nimport '../styles/accordion.css';\nimport { v4 as uuidv4 } from 'uuid';\nimport { Player, Controls } from '@lottiefiles/react-lottie-player';\nimport mejakitty_sad from '../styles/mejakitty_sad.PNG';\nexport default class MultiSearch extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      trigger: false,\n      results: []\n    };\n    this.triggerNext = this.triggerNext.bind(this);\n  }\n\n  async componentWillMount() {\n    const arrayBcs = [this.props.bcs];\n    const arrayBc_topics = [this.props.bc_topics];\n    const arrayDprs = [this.props.dprs];\n    const arrayDpr_topics = [this.props.dpr_topics];\n    const arrayTopics = [this.props.topics];\n    const arrayKeyword_grades = [this.props.keyword_grades];\n    const arrayKeyword_majors = [this.props.keyword_majors];\n    const bcs = arrayBcs[0];\n    const bc_topics = arrayBc_topics[0];\n    const dprs = arrayDprs[0];\n    const dpr_topics = arrayDpr_topics[0];\n    const topics = arrayTopics[0];\n    const keyword_grades = arrayKeyword_grades[0];\n    const keyword_majors = arrayKeyword_majors[0];\n    const {\n      steps\n    } = this.props;\n    const {\n      search_level,\n      search_subject,\n      level,\n      subject,\n      search\n    } = steps;\n    let grade = [];\n    let major = [];\n    keyword_grades.map(child_grade => {\n      if (search.value.trim().toLowerCase().includes(child_grade.attributes.keyword.trim().toLowerCase())) grade = [child_grade.attributes];\n    });\n    keyword_majors.map(child_major => {\n      if (search.value.trim().toLowerCase().includes(child_major.attributes.keyword.trim().toLowerCase())) major = [child_major.attributes];\n    });\n    search.value.trim().toLowerCase().split(/[\\s,]+/).map(value => {\n      keyword_grades.map(child_grade => {\n        if (child_grade.attributes.keyword.trim().toLowerCase() === value) grade = [child_grade.attributes];\n      });\n      keyword_majors.map(child_major => {\n        if (child_major.attributes.keyword.trim().toLowerCase() === value) major = [child_major.attributes];\n      });\n    });\n    const levelSearch = grade.length > 0 ? grade[0].grade_id : null;\n    const subjectSearch = major.length > 0 ? major[0].major_id : null;\n    const results = await Promise.all([(await Promise.all(bcs.map(row => {\n      try {\n        if (levelSearch) {\n          if (row.attributes.grade_id == levelSearch && row.attributes.major_id == search_subject.value) {\n            const filter = bc_topics.filter(bc => bc.id == row.id);\n            const category = filter.length > 0 ? topics.filter(topic => topic.id == filter[0].attributes.topic_id) : false;\n            return {\n              name: row.attributes.name,\n              image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\n              link: row.attributes.link,\n              topic: category ? category.length > 0 ? category[0].attributes.name : null : null\n            };\n          }\n        } else {\n          if (row.attributes.grade_id == search_level.value && row.attributes.major_id == subjectSearch) {\n            const filter = bc_topics.filter(bc => bc.id == row.id);\n            const category = filter.length > 0 ? topics.filter(topic => topic.id == filter[0].attributes.topic_id) : false;\n            return {\n              name: row.attributes.name,\n              image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\n              link: row.attributes.link,\n              topic: category ? category.length > 0 ? category[0].attributes.name : null : null\n            };\n          }\n        }\n\n        return false;\n      } catch (error) {\n        return false;\n      }\n    }))).filter(bcs => bcs), (await Promise.all(dprs.map(row => {\n      try {\n        if (levelSearch) {\n          if (row.attributes.grade_id == levelSearch && row.attributes.major_id == search_subject.value) {\n            const filter = dpr_topics.filter(dpr => dpr.id == row.id);\n            const category = filter.length > 0 ? topics.filter(topic => topic.id == filter[0].attributes.topic_id) : false;\n            return {\n              name: row.attributes.name,\n              image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\n              link: row.attributes.link,\n              topic: category ? category.length > 0 ? category[0].attributes.name : null : null\n            };\n          }\n        } else {\n          if (row.attributes.grade_id == search_level.value && row.attributes.major_id == subjectSearch) {\n            const filter = dpr_topics.filter(dpr => dpr.id == row.id);\n            const category = filter.length > 0 ? topics.filter(topic => topic.id == filter[0].attributes.topic_id) : false;\n            return {\n              name: row.attributes.name,\n              image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\n              link: row.attributes.link,\n              topic: category ? category.length > 0 ? category[0].attributes.name : null : null\n            };\n          }\n        }\n\n        return false;\n      } catch (error) {\n        return false;\n      }\n    }))).filter(dprs => dprs)]);\n    this.setState({\n      level,\n      subject,\n      results,\n      loading: false\n    });\n  }\n\n  triggerNext() {\n    this.setState({\n      trigger: true\n    }, () => {\n      this.props.triggerNextStep();\n    });\n  }\n\n  componentDidMount() {\n    this.props.triggerNextStep();\n  }\n\n  render() {\n    const {\n      loading,\n      results\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%',\n        background: '#fff',\n        padding: '20px 20px',\n        borderRadius: '10px'\n      },\n      children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 29\n      }, this) : results.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {},\n        children: results.map((bcdpr, parentI) => {\n          return bcdpr.map((row, i) => {\n            const uuid = uuidv4();\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: 12\n              },\n              children: /*#__PURE__*/_jsxDEV(\"nav\", {\n                className: \"accordion arrows\",\n                style: {},\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"accordion\",\n                  id: `bcdpr-${parentI}-${i + 1}-${uuid}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n                  className: \"box\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"box-title\",\n                    htmlFor: `bcdpr-${parentI}-${i + 1}-${uuid}`,\n                    children: row.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"box-close\",\n                    htmlFor: \"acc-close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"box-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                      children: row.topic\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 167,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: `${row.image}`,\n                      alt: \"img\",\n                      style: {\n                        width: \"100%\",\n                        height: \"100%\",\n                        borderRadius: \"10px\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 168,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: row.link,\n                        target: \"_blank\",\n                        className: \"link btn-a\",\n                        children: \"Lihat lebih banyak\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 173,\n                        columnNumber: 44\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"accordion\",\n                  id: \"acc-close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 29\n              }, this)\n            }, i + 1, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 29\n            }, this);\n          });\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: 'center',\n            fontWeight: 'normal'\n          },\n          children: \"Mejakitabot tidak dapat menemukan apa yang kamu cari\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: mejakitty_sad,\n          style: {\n            width: 'auto',\n            height: '150px',\n            margin: 'auto',\n            display: 'block'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 22\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/Project/ReactJS/MejaKita - Chatbot/Chatbot/src/components/MultiSearch.js"],"names":["React","Component","Loading","v4","uuidv4","Player","Controls","mejakitty_sad","MultiSearch","constructor","props","state","loading","trigger","results","triggerNext","bind","componentWillMount","arrayBcs","bcs","arrayBc_topics","bc_topics","arrayDprs","dprs","arrayDpr_topics","dpr_topics","arrayTopics","topics","arrayKeyword_grades","keyword_grades","arrayKeyword_majors","keyword_majors","steps","search_level","search_subject","level","subject","search","grade","major","map","child_grade","value","trim","toLowerCase","includes","attributes","keyword","child_major","split","levelSearch","length","grade_id","subjectSearch","major_id","Promise","all","row","filter","bc","id","category","topic","topic_id","name","image","process","env","REACT_APP_SECRET_CODE","data","url","link","error","dpr","setState","triggerNextStep","componentDidMount","render","width","background","padding","borderRadius","bcdpr","parentI","i","uuid","paddingTop","height","alignItems","justifyContent","textAlign","fontWeight","margin","display"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Loading } from 'react-simple-chatbot';\n// import { bc, bc_topic, dpr, dpr_topic, topic, keyword_grade, keyword_major } from '../dummy/data.json';\nimport '../styles/accordion.css';\nimport { v4 as uuidv4 } from 'uuid';\nimport { Player, Controls } from '@lottiefiles/react-lottie-player';\nimport mejakitty_sad from '../styles/mejakitty_sad.PNG'\n\nexport default class MultiSearch extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n            trigger: false,\n            results: []\n        };\n\n        this.triggerNext = this.triggerNext.bind(this);\n    }\n\n    async componentWillMount() {\n\n        const arrayBcs = [this.props.bcs]\n        const arrayBc_topics = [this.props.bc_topics]\n        const arrayDprs = [this.props.dprs]\n        const arrayDpr_topics = [this.props.dpr_topics]\n        const arrayTopics = [this.props.topics]\n        const arrayKeyword_grades = [this.props.keyword_grades]\n        const arrayKeyword_majors = [this.props.keyword_majors]\n\n        const bcs = arrayBcs[0]\n        const bc_topics = arrayBc_topics[0]\n        const dprs = arrayDprs[0]\n        const dpr_topics = arrayDpr_topics[0]\n        const topics = arrayTopics[0]\n        const keyword_grades = arrayKeyword_grades[0]\n        const keyword_majors = arrayKeyword_majors[0]\n\n        const { steps } = this.props;\n        const { search_level, search_subject, level, subject, search } = steps;\n\n        let grade = []\n        let major = []\n\n        keyword_grades.map(child_grade => {\n            if (search.value.trim().toLowerCase().includes(child_grade.attributes.keyword.trim().toLowerCase())) grade = [child_grade.attributes]\n        })\n        keyword_majors.map(child_major => {\n            if (search.value.trim().toLowerCase().includes(child_major.attributes.keyword.trim().toLowerCase())) major = [child_major.attributes]\n        })\n\n        search.value.trim().toLowerCase().split(/[\\s,]+/).map(value => {\n            keyword_grades.map(child_grade => {\n                if (child_grade.attributes.keyword.trim().toLowerCase() === value) grade = [child_grade.attributes]\n            })\n            keyword_majors.map(child_major => {\n                if (child_major.attributes.keyword.trim().toLowerCase() === value) major = [child_major.attributes]\n            })\n        })\n\n        const levelSearch = grade.length > 0 ? grade[0].grade_id : null\n        const subjectSearch = major.length > 0 ? major[0].major_id : null\n        const results = await Promise.all([\n            (await Promise.all(bcs.map(row => {\n                try {\n                    if (levelSearch) {\n                        if (row.attributes.grade_id == levelSearch && row.attributes.major_id == search_subject.value) {\n                            const filter = bc_topics.filter(bc => bc.id == row.id)\n                            const category = filter.length > 0 ? topics.filter((topic) => topic.id == filter[0].attributes.topic_id) : false\n                            return {\n                                name: row.attributes.name,\n                                image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\n                                link: row.attributes.link,\n                                topic: category ? (category.length > 0 ? category[0].attributes.name : null) : null\n                            }\n                        }\n                    } else {\n                        if (row.attributes.grade_id == search_level.value && row.attributes.major_id == subjectSearch) {\n                            const filter = bc_topics.filter(bc => bc.id == row.id)\n                            const category = filter.length > 0 ? topics.filter((topic) => topic.id == filter[0].attributes.topic_id) : false\n                            return {\n                                name: row.attributes.name,\n                                image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\n                                link: row.attributes.link,\n                                topic: category ? (category.length > 0 ? category[0].attributes.name : null) : null\n                            }\n                        }\n                    }\n                    return false\n                } catch (error) {\n                    return false\n                }\n            }))).filter(bcs => bcs),\n            (await Promise.all(dprs.map(row => {\n                try {\n                    if (levelSearch) {\n                        if (row.attributes.grade_id == levelSearch && row.attributes.major_id == search_subject.value) {\n                            const filter = dpr_topics.filter(dpr => dpr.id == row.id)\n                            const category = filter.length > 0 ? topics.filter((topic) => topic.id == filter[0].attributes.topic_id) : false\n                            return {\n                                name: row.attributes.name,\n                                image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\n                                link: row.attributes.link,\n                                topic: category ? (category.length > 0 ? category[0].attributes.name : null) : null\n                            }\n                        }\n                    } else {\n                        if (row.attributes.grade_id == search_level.value && row.attributes.major_id == subjectSearch) {\n                            const filter = dpr_topics.filter(dpr => dpr.id == row.id)\n                            const category = filter.length > 0 ? topics.filter((topic) => topic.id == filter[0].attributes.topic_id) : false\n                            return {\n                                name: row.attributes.name,\n                                image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\n                                link: row.attributes.link,\n                                topic: category ? (category.length > 0 ? category[0].attributes.name : null) : null\n                            }\n                        }\n                    }\n                    return false\n                } catch (error) {\n                    return false\n                }\n            }))).filter(dprs => dprs),\n        ])\n        this.setState({ level, subject, results, loading: false });\n    }\n\n    triggerNext() {\n        this.setState({ trigger: true }, () => {\n            this.props.triggerNextStep();\n        });\n    }\n\n    componentDidMount() {\n        this.props.triggerNextStep();\n    }\n\n    render() {\n        const { loading, results } = this.state;\n        return (\n            <div style={{ width: '100%', background: '#fff', padding: '20px 20px', borderRadius: '10px' }}>\n                { loading ? <Loading /> : results.length > 0 ? (\n                    <div style={{}}>\n                      {results.map((bcdpr, parentI) => {\n                        return bcdpr.map((row, i) => {\n                            const uuid = uuidv4()\n                            return (\n                            <div key={i + 1} style={{ paddingTop: 12 }}>\n                            <nav className=\"accordion arrows\" style={{}}>\n                                <input\n                                type=\"radio\"\n                                name=\"accordion\"\n                                id={`bcdpr-${parentI}-${i + 1}-${uuid}`}\n                                />\n                                <section className=\"box\">\n                                <label\n                                    className=\"box-title\"\n                                    htmlFor={`bcdpr-${parentI}-${i + 1}-${uuid}`}\n                                >\n                                    {row.name}\n                                </label>\n                                <label\n                                    className=\"box-close\"\n                                    htmlFor=\"acc-close\"\n                                ></label>\n                                <div className=\"box-content\">\n                                    <small>{row.topic}</small>\n                                    <img\n                                    src={`${row.image}`}\n                                    alt=\"img\"\n                                    style={{ width: \"100%\", height: \"100%\", borderRadius: \"10px\" }}\n                                    />\n                                    <small><a href={row.link} target='_blank' className='link btn-a'>Lihat lebih banyak</a></small>\n                                </div>\n                                </section>\n                                <input type=\"radio\" name=\"accordion\" id=\"acc-close\" />\n                            </nav>\n                            </div>\n                            )\n                        });\n                        })}\n                  </div>\n\n                ) : (<div style={{ alignItems: 'center', justifyContent: 'center' }}>\n                        <p style={{ textAlign: 'center', fontWeight: 'normal'}}>Mejakitabot tidak dapat menemukan apa yang kamu cari</p>\n                        <img src={mejakitty_sad} style={{ width: 'auto', height: '150px', margin: 'auto', display: 'block' }} />\n                    </div>)}\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}