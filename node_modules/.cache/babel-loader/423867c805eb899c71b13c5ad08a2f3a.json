{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\Project\\\\ReactJS\\\\MejaKita - Chatbot\\\\Chatbot\\\\src\\\\components\\\\FAQSearch.js\";\nimport React, { Component } from 'react';\nimport { Loading } from 'react-simple-chatbot'; // import { keyword_faq } from '../dummy/data.json';\n// import { question, question_tag, tag } from '../dummy/data.json';\n\nimport \"../styles/faqaccordion.css\";\nimport { v4 as uuidv4 } from 'uuid';\nexport default class FAQSearch extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      trigger: false,\n      // level: null,\n      subject: null,\n      result: [],\n      results: [],\n      topicFound: []\n    };\n    this.triggerNext = this.triggerNext.bind(this);\n  }\n\n  async componentWillMount() {\n    const arrayQuestions = [this.props.questions];\n    const arrayTags = [this.props.tags];\n    const arrayQuestion_tags = [this.props.question_tags];\n    const arrayKeyword_faqs = [this.props.keyword_faqs];\n    const questions = arrayQuestions[0];\n    const tags = arrayTags[0];\n    const question_tags = arrayQuestion_tags[0];\n    const keyword_faqs = arrayKeyword_faqs[0];\n    const {\n      steps\n    } = this.props;\n    const {\n      faq_search\n    } = steps;\n    const values = faq_search.value.trim().toLowerCase().split(/[\\s,]+/); // let grade = []\n\n    let faq = []; // keyword_grade.map(child_grade => {\n    //     if (search.value.trim().toLowerCase().includes(child_grade.keyword.trim().toLowerCase())) grade = [child_grade]\n    // })\n\n    keyword_faqs.map(child_faq => {\n      if (faq_search.value.trim().toLowerCase().includes(child_faq.attributes.keyword.trim().toLowerCase())) faq = [child_faq.attributes];\n    });\n    values.map(value => {\n      // keyword_grade.map(child_grade => {\n      //     if (child_grade.keyword.trim().toLowerCase() === value) grade = [child_grade]\n      // })\n      keyword_faqs.map(child_faq => {\n        if (child_faq.attributes.keyword.trim().toLowerCase() === value) faq = [child_faq];\n      });\n    });\n    const includes = await Promise.all([(await Promise.all(questions.map(child_question => {\n      if (child_question.attributes.name.toLocaleLowerCase() == faq_search.value.trim().toLowerCase()) {\n        return {\n          id: child_question.id,\n          name: child_question.attributes.name,\n          image: process.env.REACT_APP_SECRET_CODE + child_question.attributes.image.data.attributes.url,\n          desc: child_question.attributes.desc,\n          link: child_question.attributes.link\n        };\n      } else {\n        let splitTopic = null;\n        const checkType = values.filter(value => value == 'course');\n\n        if (checkType.length > 0) {\n          return false;\n        }\n\n        values.map(value => {\n          child_question.attributes.name.trim().toLowerCase().split(/[\\s,]+/).map(tag_word => {\n            if (!['question'].includes(tag_word) && tag_word == value) {\n              splitTopic = {\n                id: child_question.id,\n                name: child_question.attributes.name,\n                image: process.env.REACT_APP_SECRET_CODE + child_question.attributes.image.data.attributes.url,\n                desc: child_question.attributes.desc,\n                link: child_question.attributes.link\n              };\n            }\n          });\n        });\n        return splitTopic || false;\n      }\n    }))).filter(questions => questions), (await Promise.all(tags.map(tag => {\n      let results = [];\n\n      if (tag.attributes.name.toLowerCase().includes(faq_search.value.toLowerCase()) || faq_search.value.toLowerCase().includes(tag.attributes.name.toLowerCase())) {\n        const questTags = question_tags.filter(question => question.attributes.tag_id == tag.id);\n        questTags.map(questTag => {\n          questions.map(child_question => {\n            if (child_question.id == questTag.id) {\n              results = [...results, {\n                tag: tag.attributes.name,\n                name: child_question.attributes.name,\n                image: process.env.REACT_APP_SECRET_CODE + child_question.attributes.image.data.attributes.url,\n                desc: child_question.attributes.desc,\n                link: child_question.attributes.link\n              }];\n            }\n          });\n        });\n      }\n\n      return results.length > 0 ? results : false;\n    }))).filter(questTags => questTags)]);\n    const level = faq.length > 0 ? [faq[0]] : [];\n    const subject = faq.length > 0 ? [faq[0]] : [];\n    const result = faq.length > 0 ? [faq[0]] : faq.length > 0 ? [faq[0]] : [];\n    const multi = level.length > 0 && subject.length > 0;\n    const topicFound = await Promise.all([includes[0].map(row => {\n      const filter = question_tags.filter(question => question.attributes.question_id == row.id);\n      const category = filter.length > 0 ? tags.filter(tag => tag.id == filter[0].attributes.tag_id) : false;\n      return {\n        name: row.name,\n        image: row.image,\n        desc: row.desc,\n        link: row.link,\n        tag: category ? category.length > 0 ? category[0].attributes.name : null : null\n      };\n    }) // ...includes[1]\n    ]);\n\n    if (multi) {\n      const results = await Promise.all([(await Promise.all(questions.map(row => {\n        try {\n          if (row.attributes.faq_id == level[0].attributes.faq_id && row.attributes.faq_id == subject[0].attributes.faq_id) {\n            const filter = question_tags.filter(question => question.id == row.id);\n            const category = filter.length > 0 ? tags.filter(tag => tag.id == filter[0].attributes.tag_id) : false;\n            return {\n              name: row.attributes.name,\n              image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\n              desc: row.attributes.desc,\n              link: row.attributes.link,\n              tag: category ? category.length > 0 ? category[0].attributes.name : null : null\n            };\n          }\n\n          return false;\n        } catch (error) {\n          return false;\n        }\n      }))).filter(questions => questions)]);\n      this.setState({\n        results\n      });\n    }\n\n    this.setState({\n      trigger: 'faq_subject_res',\n      level,\n      subject,\n      topicFound,\n      result,\n      loading: false\n    });\n\n    if (this.state.result.length < 1) {\n      this.props.triggerNextStep({\n        trigger: 'faq_re_search'\n      });\n    } else {\n      if (multi) {\n        this.props.triggerNextStep({\n          trigger: 'faq_re_search'\n        });\n      } else {\n        if (topicFound[0].length > 0 || topicFound.length > 2) {\n          this.props.triggerNextStep({\n            trigger: 'faq_re_search'\n          });\n        } else {\n          if (subject.length > 0) {\n            this.props.triggerNextStep({\n              trigger: 'faq_re_search'\n            });\n          } // else if (subject.length > 0) {\n          //     this.props.triggerNextStep({ trigger: 'search_level' })\n          // }\n\n        }\n      }\n    }\n  }\n\n  triggerNext() {\n    this.setState({\n      trigger: true\n    }, () => {\n      this.props.triggerNextStep();\n    });\n  }\n\n  render() {\n    const {\n      loading,\n      result,\n      results,\n      topicFound\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%'\n      },\n      children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 29\n      }, this) : topicFound[0].length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {},\n        children: topicFound.map((materi, parentI) => {\n          if (parentI == 0 || parentI == 1) {\n            return materi.map((row, i) => {\n              const uuid = uuidv4();\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  paddingTop: 12\n                },\n                children: /*#__PURE__*/_jsxDEV(\"nav\", {\n                  className: \"accordion arrows\",\n                  style: {},\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"accordion\",\n                    id: `materi-${parentI}-${i + 1}-${uuid}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n                    className: \"box\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"box-title\",\n                      htmlFor: `materi-${parentI}-${i + 1}-${uuid}`,\n                      children: row.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 210,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"box-close\",\n                      htmlFor: \"acc-close\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 216,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"box-content\",\n                      children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                        children: row.tag\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 221,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: `${row.image}`,\n                        alt: \"img\",\n                        className: \"img\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 222,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-desc prose\",\n                        children: row.desc\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 227,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                        children: /*#__PURE__*/_jsxDEV(\"a\", {\n                          href: row.link,\n                          target: \"_blank\",\n                          className: \"link btn\",\n                          children: \"Lihat lebih banyak\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 230,\n                          columnNumber: 42\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 230,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"accordion\",\n                    id: \"acc-close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 27\n                }, this)\n              }, i + 1, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 27\n              }, this);\n            });\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }, this) : topicFound.length > 2 && topicFound[2].length > 0 ? topicFound[2].map((row, i) => {\n        const uuid = uuidv4();\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            paddingTop: 12\n          },\n          children: /*#__PURE__*/_jsxDEV(\"nav\", {\n            className: \"accordion arrows\",\n            style: {},\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"accordion\",\n              id: `materi-${i + 1}-${uuid}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n              className: \"box\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"box-title\",\n                htmlFor: `materi-${i + 1}-${uuid}`,\n                children: row.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"box-close\",\n                htmlFor: \"acc-close\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                  children: row.tag\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${row.image}`,\n                  alt: \"img\",\n                  className: \"img\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-desc prose\",\n                  children: row.desc\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: row.link,\n                    target: \"_blank\",\n                    className: \"link btn\",\n                    children: \"Lihat lebih banyak\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 42\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 35\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"accordion\",\n              id: \"acc-close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 29\n          }, this)\n        }, i + 1, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 25\n        }, this);\n      }) : results.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {},\n        children: results.map((materi, parentI) => {\n          return materi.map((row, i) => {\n            const uuid = uuidv4();\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: 12\n              },\n              children: /*#__PURE__*/_jsxDEV(\"nav\", {\n                className: \"accordion arrows\",\n                style: {},\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"accordion\",\n                  id: `materi-${parentI}-${i + 1}-${uuid}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n                  className: \"box\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"box-title\",\n                    htmlFor: `materi-${parentI}-${i + 1}-${uuid}`,\n                    children: row.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 35\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"box-close\",\n                    htmlFor: \"acc-close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 296,\n                    columnNumber: 35\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"box-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                      children: row.tag\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 301,\n                      columnNumber: 39\n                    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: `${row.image}`,\n                      alt: \"img\",\n                      className: \"img\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 302,\n                      columnNumber: 39\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-desc prose\",\n                      children: row.desc\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 307,\n                      columnNumber: 39\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: row.link,\n                        target: \"_blank\",\n                        className: \"link btn\",\n                        children: \"Lihat lebih banyak\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 310,\n                        columnNumber: 46\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 310,\n                      columnNumber: 39\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 35\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"accordion\",\n                  id: \"acc-close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 35\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 31\n              }, this)\n            }, i + 1, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 31\n            }, this);\n          });\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 22\n      }, this) : result.length > 0 ? `${result[0].keyword} ditemukan, tambahkan kata kunci lainnya` : 'Mejakitabot tidak dapat menemukan apa yang kamu cari'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/Project/ReactJS/MejaKita - Chatbot/Chatbot/src/components/FAQSearch.js"],"names":["React","Component","Loading","v4","uuidv4","FAQSearch","constructor","props","state","loading","trigger","subject","result","results","topicFound","triggerNext","bind","componentWillMount","arrayQuestions","questions","arrayTags","tags","arrayQuestion_tags","question_tags","arrayKeyword_faqs","keyword_faqs","steps","faq_search","values","value","trim","toLowerCase","split","faq","map","child_faq","includes","attributes","keyword","Promise","all","child_question","name","toLocaleLowerCase","id","image","process","env","REACT_APP_SECRET_CODE","data","url","desc","link","splitTopic","checkType","filter","length","tag_word","tag","questTags","question","tag_id","questTag","level","multi","row","question_id","category","faq_id","error","setState","triggerNextStep","render","width","materi","parentI","i","uuid","paddingTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Loading } from 'react-simple-chatbot';\r\n// import { keyword_faq } from '../dummy/data.json';\r\n// import { question, question_tag, tag } from '../dummy/data.json';\r\nimport \"../styles/faqaccordion.css\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport default class FAQSearch extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            trigger: false,\r\n            // level: null,\r\n            subject: null,\r\n            result: [],\r\n            results: [],\r\n            topicFound: []\r\n        };\r\n\r\n        this.triggerNext = this.triggerNext.bind(this);\r\n    }\r\n\r\n    async componentWillMount() {\r\n\r\n        const arrayQuestions = [this.props.questions]\r\n        const arrayTags = [this.props.tags]\r\n        const arrayQuestion_tags = [this.props.question_tags]\r\n        const arrayKeyword_faqs = [this.props.keyword_faqs]\r\n\r\n        const questions = arrayQuestions[0]\r\n        const tags = arrayTags[0]\r\n        const question_tags = arrayQuestion_tags[0]\r\n        const keyword_faqs = arrayKeyword_faqs[0]\r\n        \r\n        const { steps } = this.props;\r\n        const { faq_search } = steps;\r\n        const values = faq_search.value.trim().toLowerCase().split(/[\\s,]+/)\r\n\r\n        // let grade = []\r\n        let faq = []\r\n\r\n        // keyword_grade.map(child_grade => {\r\n        //     if (search.value.trim().toLowerCase().includes(child_grade.keyword.trim().toLowerCase())) grade = [child_grade]\r\n        // })\r\n        keyword_faqs.map(child_faq => {\r\n            if (faq_search.value.trim().toLowerCase().includes(child_faq.attributes.keyword.trim().toLowerCase())) faq = [child_faq.attributes]\r\n        })\r\n\r\n        values.map(value => {\r\n            // keyword_grade.map(child_grade => {\r\n            //     if (child_grade.keyword.trim().toLowerCase() === value) grade = [child_grade]\r\n            // })\r\n            keyword_faqs.map(child_faq => {\r\n                if (child_faq.attributes.keyword.trim().toLowerCase() === value) faq = [child_faq]\r\n            })\r\n        })\r\n\r\n        const includes = await Promise.all([\r\n            (await Promise.all(questions.map(child_question => {\r\n                if (child_question.attributes.name.toLocaleLowerCase() == faq_search.value.trim().toLowerCase()) {\r\n                    return { \r\n                        id: child_question.id, \r\n                        name: child_question.attributes.name, \r\n                        image: process.env.REACT_APP_SECRET_CODE + child_question.attributes.image.data.attributes.url,\r\n                        desc: child_question.attributes.desc, \r\n                        link: child_question.attributes.link \r\n                    }\r\n                } else {\r\n                    let splitTopic = null\r\n\r\n                    const checkType = values.filter(value => value == 'course')\r\n                    if (checkType.length > 0) {\r\n                        return false\r\n                    }\r\n\r\n                    values.map(value => {\r\n                        child_question.attributes.name.trim().toLowerCase().split(/[\\s,]+/).map(tag_word => {\r\n                            if (!['question'].includes(tag_word) && tag_word == value) {\r\n                                splitTopic = { \r\n                                    id: child_question.id, \r\n                                    name: child_question.attributes.name, \r\n                                    image: process.env.REACT_APP_SECRET_CODE + child_question.attributes.image.data.attributes.url,\r\n                                    desc: child_question.attributes.desc, \r\n                                    link: child_question.attributes.link \r\n                                }\r\n                            }\r\n                        })\r\n                    })\r\n                    return splitTopic || false\r\n                }\r\n            }))).filter(questions => questions),\r\n            \r\n            (await Promise.all(tags.map(tag => {\r\n                let results = []\r\n                if (tag.attributes.name.toLowerCase().includes(faq_search.value.toLowerCase()) || faq_search.value.toLowerCase().includes(tag.attributes.name.toLowerCase())) {\r\n                    const questTags = question_tags.filter(question => question.attributes.tag_id == tag.id)\r\n\r\n                    questTags.map(questTag => {\r\n                        questions.map(child_question => {\r\n                            if (child_question.id == questTag.id) {\r\n                                results = [\r\n                                    ...results, { \r\n                                        tag: tag.attributes.name, \r\n                                        name: child_question.attributes.name, \r\n                                        image: process.env.REACT_APP_SECRET_CODE + child_question.attributes.image.data.attributes.url,\r\n                                        desc: child_question.attributes.desc, \r\n                                        link: child_question.attributes.link \r\n                                }]\r\n                            }\r\n                        })\r\n                    })\r\n                }\r\n                return results.length > 0 ? results : false\r\n            }))).filter(questTags => questTags),\r\n        ])\r\n\r\n        const level = faq.length > 0 ? [faq[0]] : []\r\n        const subject = faq.length > 0 ? [faq[0]] : []\r\n        const result = faq.length > 0 ? [faq[0]] : (faq.length > 0 ? [faq[0]] : [])\r\n        const multi = level.length > 0 && subject.length > 0\r\n\r\n        const topicFound = await Promise.all([\r\n            includes[0].map(row => {\r\n                const filter = question_tags.filter(question => question.attributes.question_id == row.id)\r\n                const category = filter.length > 0 ? tags.filter((tag) => tag.id == filter[0].attributes.tag_id) : false\r\n                \r\n                return {\r\n                    name: row.name,\r\n                    image: row.image,\r\n                    desc: row.desc,\r\n                    link: row.link,\r\n                    tag: category ? (category.length > 0 ? category[0].attributes.name : null) : null\r\n                }\r\n            }),\r\n            // ...includes[1]\r\n        ])\r\n\r\n        if (multi) {\r\n            const results = await Promise.all([\r\n                (await Promise.all(questions.map(row => {\r\n                    try {\r\n                        if (row.attributes.faq_id == level[0].attributes.faq_id && row.attributes.faq_id == subject[0].attributes.faq_id) {\r\n                            const filter = question_tags.filter(question => question.id == row.id)\r\n                            const category = filter.length > 0 ? tags.filter((tag) => tag.id == filter[0].attributes.tag_id) : false\r\n                            \r\n                            return {\r\n                                name: row.attributes.name,\r\n                                image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\r\n                                desc: row.attributes.desc,\r\n                                link: row.attributes.link,\r\n                                tag: category ? (category.length > 0 ? category[0].attributes.name : null) : null\r\n                            }\r\n                        }\r\n                        return false\r\n                    } catch (error) {\r\n                        return false\r\n                    }\r\n                }))).filter(questions => questions),\r\n            ])\r\n            this.setState({ results });\r\n        }\r\n        this.setState({ trigger: 'faq_subject_res', level, subject, topicFound, result, loading: false });\r\n\r\n        if (this.state.result.length < 1) {\r\n            this.props.triggerNextStep({ trigger: 'faq_re_search' })\r\n        } else {\r\n            if (multi) {\r\n                this.props.triggerNextStep({ trigger: 'faq_re_search' });\r\n            } else {\r\n                if (topicFound[0].length > 0 || topicFound.length > 2) {\r\n                    this.props.triggerNextStep({ trigger: 'faq_re_search' });\r\n                } else {\r\n                    if (subject.length > 0) {\r\n                        this.props.triggerNextStep({ trigger: 'faq_re_search' })\r\n                    } \r\n                    // else if (subject.length > 0) {\r\n                    //     this.props.triggerNextStep({ trigger: 'search_level' })\r\n                    // }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    triggerNext() {\r\n        this.setState({ trigger: true }, () => {\r\n            this.props.triggerNextStep();\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { loading, result, results, topicFound } = this.state;\r\n        return (\r\n            <div style={{ width: '100%' }}>\r\n                { loading ? <Loading /> : (topicFound[0].length > 0 ? (\r\n                    <div style={{}}>\r\n                    {topicFound.map((materi, parentI) => {\r\n                        if(parentI == 0 || parentI == 1) {\r\n                      return materi.map((row, i) => {\r\n                          const uuid = uuidv4()\r\n                          return (\r\n                          <div key={i + 1} style={{ paddingTop: 12 }}>\r\n                          <nav className=\"accordion arrows\" style={{}}>\r\n                              <input\r\n                              type=\"radio\"\r\n                              name=\"accordion\"\r\n                              id={`materi-${parentI}-${i + 1}-${uuid}`}\r\n                              />\r\n                              <section className=\"box\">\r\n                              <label\r\n                                  className=\"box-title\"\r\n                                  htmlFor={`materi-${parentI}-${i + 1}-${uuid}`}\r\n                              >\r\n                                  {row.name}\r\n                              </label>\r\n                              <label\r\n                                  className=\"box-close\"\r\n                                  htmlFor=\"acc-close\"\r\n                              ></label>\r\n                              <div className=\"box-content\">\r\n                                  <small>{row.tag}</small>\r\n                                  <img\r\n                                  src={`${row.image}`}\r\n                                  alt=\"img\"\r\n                                  className='img'\r\n                                  />\r\n                                  <p className='text-desc prose'>\r\n                                    {row.desc}\r\n                                  </p>\r\n                                  <small><a href={row.link} target='_blank' className='link btn'>Lihat lebih banyak</a></small>\r\n                              </div>\r\n                              </section>\r\n                              <input type=\"radio\" name=\"accordion\" id=\"acc-close\" />\r\n                          </nav>\r\n                          </div>\r\n                          )\r\n                      });\r\n                }})}\r\n                </div>\r\n                ) : (topicFound.length > 2 && topicFound[2].length > 0 ? (\r\n                    topicFound[2].map((row, i) => {\r\n                        const uuid = uuidv4()\r\n                        return (\r\n                        <div key={i + 1} style={{ paddingTop: 12 }}>\r\n                            <nav className=\"accordion arrows\" style={{}}>\r\n                                <input\r\n                                type=\"radio\"\r\n                                name=\"accordion\"    \r\n                                id={`materi-${i + 1}-${uuid}`}\r\n                                />\r\n                                <section className=\"box\">\r\n                                <label\r\n                                    className=\"box-title\"\r\n                                    htmlFor={`materi-${i + 1}-${uuid}`}\r\n                                >\r\n                                    {row.name}\r\n                                </label>\r\n                                <label className=\"box-close\" htmlFor=\"acc-close\"></label>\r\n                                <div className=\"box-content\">\r\n                                    <small>{row.tag}</small>\r\n                                    <img\r\n                                    src={`${row.image}`}\r\n                                    alt=\"img\"\r\n                                    className='img'\r\n                                    />\r\n                                    <p className='text-desc prose'>\r\n                                        {row.desc}\r\n                                    </p>\r\n                                  <small><a href={row.link} target='_blank' className='link btn'>Lihat lebih banyak</a></small>\r\n                                </div>\r\n                                </section>\r\n                                <input type=\"radio\" name=\"accordion\" id=\"acc-close\" />\r\n                            </nav>\r\n                        </div>\r\n                     ) })\r\n                ) : (results.length > 0 ?\r\n                    (<div style={{}}>\r\n                        {results.map((materi, parentI) => {\r\n                          return materi.map((row, i) => {\r\n                              const uuid = uuidv4()\r\n                              return (\r\n                              <div key={i + 1} style={{ paddingTop: 12 }}>\r\n                              <nav className=\"accordion arrows\" style={{}}>\r\n                                  <input\r\n                                  type=\"radio\"\r\n                                  name=\"accordion\"\r\n                                  id={`materi-${parentI}-${i + 1}-${uuid}`}\r\n                                  />\r\n                                  <section className=\"box\">\r\n                                  <label\r\n                                      className=\"box-title\"\r\n                                      htmlFor={`materi-${parentI}-${i + 1}-${uuid}`}\r\n                                  >\r\n                                      {row.name}\r\n                                  </label>\r\n                                  <label\r\n                                      className=\"box-close\"\r\n                                      htmlFor=\"acc-close\"\r\n                                  ></label>\r\n                                  <div className=\"box-content\">\r\n                                      <small>{row.tag}</small>\r\n                                      <img\r\n                                      src={`${row.image}`}\r\n                                      alt=\"img\"\r\n                                      className='img'\r\n                                      />\r\n                                      <p className='text-desc prose'>\r\n                                        {row.desc}\r\n                                      </p>\r\n                                      <small><a href={row.link} target='_blank' className='link btn'>Lihat lebih banyak</a></small>\r\n                                  </div>\r\n                                  </section>\r\n                                  <input type=\"radio\" name=\"accordion\" id=\"acc-close\" />\r\n                              </nav>\r\n                              </div>\r\n                              )\r\n                          });\r\n                          })}\r\n                    </div>) : (result.length > 0 ? `${result[0].keyword} ditemukan, tambahkan kata kunci lainnya` : 'Mejakitabot tidak dapat menemukan apa yang kamu cari'))))}\r\n            </div>\r\n        )\r\n    }\r\n}                                                                                                                   "]},"metadata":{},"sourceType":"module"}