{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\Project\\\\ReactJS\\\\MejaKita - Chatbot\\\\Chatbot\\\\src\\\\components\\\\FAQMultiSearch.js\";\nimport React, { Component } from 'react';\nimport { Loading } from 'react-simple-chatbot';\nimport ReactMarkdown from \"react-markdown\";\nimport rehypeRaw from \"rehype-raw\"; // import { keyword_faq, tag, question, question_tag } from '../dummy/data.json';\n\nimport '../styles/faqaccordion.css';\nimport { v4 as uuidv4 } from 'uuid';\nimport axios from 'axios';\nimport { Player, Controls } from '@lottiefiles/react-lottie-player';\nimport mejakitty_sad from '../styles/mejakitty_sad.PNG';\nexport default class FAQMultiSearch extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      trigger: false,\n      results: []\n    };\n    this.triggerNext = this.triggerNext.bind(this);\n  }\n\n  async componentWillMount() {\n    const arrayQuestions = [this.props.questions];\n    const arrayTags = [this.props.tags];\n    const arrayQuestion_tags = [this.props.question_tags];\n    const arrayKeyword_faqs = [this.props.keyword_faqs];\n    const questions = arrayQuestions[0];\n    const tags = arrayTags[0];\n    const question_tags = arrayQuestion_tags[0];\n    const keyword_faqs = arrayKeyword_faqs[0];\n    const {\n      steps\n    } = this.props;\n    const {\n      search_level,\n      faq_search_subject,\n      level,\n      faq_subject,\n      faq_search\n    } = steps; // let grade = []\n\n    let faq = []; // keyword_grade.map(child_grade => {\n    //     if (search.value.trim().toLowerCase().includes(child_grade.keyword.trim().toLowerCase())) grade = [child_grade]\n    // })\n\n    keyword_faqs.map(child_faq => {\n      if (faq_search.value.trim().toLowerCase().includes(child_faq.attributes.keyword.trim().toLowerCase())) faq = [child_faq.attributes];\n    });\n    faq_search.value.trim().toLowerCase().split(/[\\s,]+/).map(value => {\n      // keyword_grade.map(child_grade => {\n      //     if (child_grade.keyword.trim().toLowerCase() === value) grade = [child_grade]\n      // })\n      keyword_faqs.map(child_faq => {\n        if (child_faq.attributes.keyword.trim().toLowerCase() === value) faq = [child_faq];\n      });\n    }); // const levelSearch = grade.length > 0 ? grade[0].grade_id : null\n\n    const subjectSearch = faq.length > 0 ? faq[0].faq_id : null;\n    const results = await Promise.all([(await Promise.all(questions.map(row => {\n      try {\n        if (subjectSearch) {\n          if (row.attributes.faq_id == faq_search_subject.value) {\n            const filter = question_tags.filter(question => question.id == row.id);\n            const category = filter.length > 0 ? tags.filter(tag => tag.id == filter[0].attributes.tag_id) : false;\n            return {\n              name: row.attributes.name,\n              image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\n              desc: row.attributes.desc,\n              link: row.attributes.link,\n              tag: category ? category.length > 0 ? category[0].attributes.name : null : null\n            };\n          }\n        } else {\n          if (row.attributes.faq_id == subjectSearch) {\n            const filter = question_tags.filter(question => question.id == row.id);\n            const category = filter.length > 0 ? tags.filter(tag => tag.id == filter[0].attributes.tag_id) : false;\n            return {\n              name: row.attributes.name,\n              image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\n              desc: row.attributes.desc,\n              link: row.attributes.link,\n              tag: category ? category.length > 0 ? category[0].attributes.name : null : null\n            };\n          }\n        }\n\n        return false;\n      } catch (error) {\n        return false;\n      }\n    }))).filter(questions => questions)]);\n    this.setState({\n      faq_subject,\n      results,\n      loading: false\n    });\n  }\n\n  triggerNext() {\n    this.setState({\n      trigger: true\n    }, () => {\n      this.props.triggerNextStep();\n    });\n  }\n\n  componentDidMount() {\n    this.props.triggerNextStep();\n  }\n\n  render() {\n    const {\n      loading,\n      results\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%'\n      },\n      children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 29\n      }, this) : results.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {},\n        children: results.map((materi, parentI) => {\n          return materi.map((row, i) => {\n            const uuid = uuidv4();\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: 12\n              },\n              children: /*#__PURE__*/_jsxDEV(\"nav\", {\n                className: \"accordion arrows\",\n                style: {},\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"accordion\",\n                  id: `materi-${parentI}-${i + 1}-${uuid}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n                  className: \"box\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"box-title\",\n                    htmlFor: `materi-${parentI}-${i + 1}-${uuid}`,\n                    children: row.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"box-close\",\n                    htmlFor: \"acc-close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"box-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                      children: row.tag\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 136,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: `${row.image}`,\n                      alt: \"img\",\n                      className: \"img\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-desc\",\n                      children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                        children: row.desc,\n                        rehypePlugins: [rehypeRaw]\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 143,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 142,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: row.link,\n                        target: \"_blank\",\n                        className: \"link btn\",\n                        children: \"Lihat lebih banyak\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 145,\n                        columnNumber: 44\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 145,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"accordion\",\n                  id: \"acc-close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 29\n              }, this)\n            }, i + 1, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 29\n            }, this);\n          });\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: 'center',\n            fontWeight: 'normal'\n          },\n          children: \"Mejakitabot tidak dapat menemukan apa yang kamu cari\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Player, {\n          autoplay: true,\n          loop: true,\n          src: \"https://assets1.lottiefiles.com/packages/lf20_tmsiddoc.json\",\n          style: {\n            height: 'auto',\n            width: 'auto'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 22\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/Project/ReactJS/MejaKita - Chatbot/Chatbot/src/components/FAQMultiSearch.js"],"names":["React","Component","Loading","ReactMarkdown","rehypeRaw","v4","uuidv4","axios","Player","Controls","mejakitty_sad","FAQMultiSearch","constructor","props","state","loading","trigger","results","triggerNext","bind","componentWillMount","arrayQuestions","questions","arrayTags","tags","arrayQuestion_tags","question_tags","arrayKeyword_faqs","keyword_faqs","steps","search_level","faq_search_subject","level","faq_subject","faq_search","faq","map","child_faq","value","trim","toLowerCase","includes","attributes","keyword","split","subjectSearch","length","faq_id","Promise","all","row","filter","question","id","category","tag","tag_id","name","image","process","env","REACT_APP_SECRET_CODE","data","url","desc","link","error","setState","triggerNextStep","componentDidMount","render","width","materi","parentI","i","uuid","paddingTop","alignItems","textAlign","fontWeight","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Loading } from 'react-simple-chatbot';\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport rehypeRaw from \"rehype-raw\";\r\n// import { keyword_faq, tag, question, question_tag } from '../dummy/data.json';\r\nimport '../styles/faqaccordion.css';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport axios from 'axios'\r\nimport { Player, Controls } from '@lottiefiles/react-lottie-player';\r\nimport mejakitty_sad from '../styles/mejakitty_sad.PNG'\r\n\r\nexport default class FAQMultiSearch extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            trigger: false,\r\n            results: []\r\n        };\r\n\r\n        this.triggerNext = this.triggerNext.bind(this);\r\n    }\r\n\r\n    async componentWillMount() {\r\n        const arrayQuestions = [this.props.questions]\r\n        const arrayTags = [this.props.tags]\r\n        const arrayQuestion_tags = [this.props.question_tags]\r\n        const arrayKeyword_faqs = [this.props.keyword_faqs]\r\n\r\n        const questions = arrayQuestions[0]\r\n        const tags = arrayTags[0]\r\n        const question_tags = arrayQuestion_tags[0]\r\n        const keyword_faqs = arrayKeyword_faqs[0]\r\n        \r\n        const { steps } = this.props;\r\n        const { search_level, faq_search_subject, level, faq_subject, faq_search } = steps;\r\n\r\n        // let grade = []\r\n        let faq = []\r\n\r\n        // keyword_grade.map(child_grade => {\r\n        //     if (search.value.trim().toLowerCase().includes(child_grade.keyword.trim().toLowerCase())) grade = [child_grade]\r\n        // })\r\n        keyword_faqs.map(child_faq => {\r\n            if (faq_search.value.trim().toLowerCase().includes(child_faq.attributes.keyword.trim().toLowerCase())) faq = [child_faq.attributes]\r\n        })\r\n\r\n        faq_search.value.trim().toLowerCase().split(/[\\s,]+/).map(value => {\r\n            // keyword_grade.map(child_grade => {\r\n            //     if (child_grade.keyword.trim().toLowerCase() === value) grade = [child_grade]\r\n            // })\r\n            keyword_faqs.map(child_faq => {\r\n                if (child_faq.attributes.keyword.trim().toLowerCase() === value) faq = [child_faq]\r\n            })\r\n        })\r\n\r\n        // const levelSearch = grade.length > 0 ? grade[0].grade_id : null\r\n        const subjectSearch = faq.length > 0 ? faq[0].faq_id : null\r\n        const results = await Promise.all([\r\n            (await Promise.all(questions.map(row => {\r\n                try {\r\n                    if (subjectSearch) {\r\n                        if (row.attributes.faq_id == faq_search_subject.value) {\r\n                            const filter = question_tags.filter(question => question.id == row.id)\r\n                            const category = filter.length > 0 ? tags.filter((tag) => tag.id == filter[0].attributes.tag_id) : false\r\n                            return {\r\n                                name: row.attributes.name,\r\n                                image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\r\n                                desc: row.attributes.desc,\r\n                                link: row.attributes.link,\r\n                                tag: category ? (category.length > 0 ? category[0].attributes.name : null) : null\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (row.attributes.faq_id == subjectSearch) {\r\n                            const filter = question_tags.filter(question => question.id == row.id)\r\n                            const category = filter.length > 0 ? tags.filter((tag) => tag.id == filter[0].attributes.tag_id) : false\r\n                            return {\r\n                                name: row.attributes.name,\r\n                                image: process.env.REACT_APP_SECRET_CODE + row.attributes.image.data.attributes.url,\r\n                                desc: row.attributes.desc,\r\n                                link: row.attributes.link,\r\n                                tag: category ? (category.length > 0 ? category[0].attributes.name : null) : null\r\n                            }\r\n                        }\r\n                    }\r\n                    return false\r\n                } catch (error) {\r\n                    return false\r\n                }\r\n            }))).filter(questions => questions),\r\n        ])\r\n        this.setState({ faq_subject, results, loading: false })\r\n    }\r\n\r\n    triggerNext() {\r\n        this.setState({ trigger: true }, () => {\r\n            this.props.triggerNextStep();\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.triggerNextStep();\r\n    }\r\n\r\n    render() {\r\n        const { loading, results } = this.state;\r\n        return (\r\n            <div style={{ width: '100%' }}>\r\n                { loading ? <Loading /> : results.length > 0 ? (\r\n                    <div style={{}}>\r\n                      {results.map((materi, parentI) => {\r\n                        return materi.map((row, i) => {\r\n                            const uuid = uuidv4()\r\n                            return (\r\n                            <div key={i + 1} style={{ paddingTop: 12 }}>\r\n                            <nav className=\"accordion arrows\" style={{}}>\r\n                                <input\r\n                                type=\"radio\"\r\n                                name=\"accordion\"\r\n                                id={`materi-${parentI}-${i + 1}-${uuid}`}\r\n                                />\r\n                                <section className=\"box\">\r\n                                <label\r\n                                    className=\"box-title\"\r\n                                    htmlFor={`materi-${parentI}-${i + 1}-${uuid}`}\r\n                                >\r\n                                    {row.name}\r\n                                </label>\r\n                                <label\r\n                                    className=\"box-close\"\r\n                                    htmlFor=\"acc-close\"\r\n                                ></label>\r\n                                <div className=\"box-content\">\r\n                                    <small>{row.tag}</small>\r\n                                    <img\r\n                                    src={`${row.image}`}\r\n                                    alt=\"img\"\r\n                                    className='img'\r\n                                    />\r\n                                    <p className='text-desc'>\r\n                                        <ReactMarkdown children={row.desc} rehypePlugins={[rehypeRaw]} />\r\n                                    </p>\r\n                                    <small><a href={row.link} target='_blank' className='link btn'>Lihat lebih banyak</a></small>\r\n                                </div>\r\n                                </section>\r\n                                <input type=\"radio\" name=\"accordion\" id=\"acc-close\" />\r\n                            </nav>\r\n                            </div>\r\n                            )\r\n                        });\r\n                        })}\r\n                  </div>\r\n\r\n                ) : (<div style={{ alignItems: 'center'}}>\r\n                        <p style={{ textAlign: 'center', fontWeight: 'normal'}}>Mejakitabot tidak dapat menemukan apa yang kamu cari</p>\r\n                        <Player\r\n                            autoplay\r\n                            loop\r\n                            src=\"https://assets1.lottiefiles.com/packages/lf20_tmsiddoc.json\"\r\n                            style={{ height: 'auto', width: 'auto' }}\r\n                            >\r\n                        </Player>\r\n                    </div>)}\r\n            </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}