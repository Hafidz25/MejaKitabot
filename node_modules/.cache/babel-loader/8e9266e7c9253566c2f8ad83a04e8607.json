{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\Project\\\\ReactJS\\\\MejaKita - Chatbot\\\\Chatbot\\\\src\\\\components\\\\Search.js\";\nimport React, { Component } from 'react';\nimport { Loading } from 'react-simple-chatbot';\nimport { keyword_grade, keyword_major } from '../dummy/data.json';\nimport { bc, bc_topic, dpr, dpr_topic, topic } from '../dummy/data.json';\nimport \"../styles/accordion.css\";\nimport { v4 as uuidv4 } from 'uuid';\nexport default class Search extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      trigger: false,\n      level: null,\n      subject: null,\n      result: [],\n      results: [],\n      topicFound: []\n    };\n    this.triggerNext = this.triggerNext.bind(this);\n  }\n\n  async componentWillMount() {\n    const arrayBcs = [this.props.bcs];\n    const arrayBc_topics = [this.props.bc_topics];\n    const arrayDprs = [this.props.dprs];\n    const arrayDpr_topics = [this.props.dpr_topics];\n    const arrayTopics = [this.props.topics];\n    const arrayKeyword_grades = [this.props.keyword_grades];\n    const arrayKeyword_majors = [this.props.keyword_majors];\n    const bcs = arrayBcs[0];\n    const bc_topics = arrayBc_topics[0];\n    const dprs = arrayDprs[0];\n    const dpr_topics = arrayDpr_topics[0];\n    const topics = arrayTopics[0];\n    const keyword_grades = arrayKeyword_grades[0];\n    const keyword_majors = arrayKeyword_majors[0];\n    const {\n      steps\n    } = this.props;\n    const {\n      search\n    } = steps;\n    const values = search.value.trim().toLowerCase().split(/[\\s,]+/);\n    let grade = [];\n    let major = [];\n    keyword_grades.map(child_grade => {\n      if (search.value.trim().toLowerCase().includes(child_grade.attributes.keyword.trim().toLowerCase())) grade = [child_grade.attributes];\n    });\n    keyword_majors.map(child_major => {\n      if (search.value.trim().toLowerCase().includes(child_major.attributes.keyword.trim().toLowerCase())) major = [child_major.attributes];\n    });\n    values.map(value => {\n      keyword_grades.map(child_grade => {\n        if (child_grade.attributes.keyword.trim().toLowerCase() === value) grade = [child_grade.attributes];\n      });\n      keyword_majors.map(child_major => {\n        if (child_major.attributes.keyword.trim().toLowerCase() === value) major = [child_major.attributes];\n      });\n    });\n    const includes = await Promise.all([(await Promise.all(bcs.map(child_bc => {\n      if (child_bc.attributes.name.toLocaleLowerCase() == search.value.trim().toLowerCase()) {\n        return {\n          id: child_bc.id,\n          name: child_bc.attributes.name,\n          image: process.env.REACT_APP_SECRET_CODE + child_bc.attributes.image.data.attributes.url,\n          link: child_bc.attributes.link\n        };\n      } else {\n        let splitTopic = null;\n        const checkType = values.filter(value => value == 'dpr');\n\n        if (checkType.length > 0) {\n          return false;\n        }\n\n        values.map(value => {\n          child_bc.attributes.name.trim().toLowerCase().split(/[\\s,]+/).map(topic_word => {\n            if (!['bc', 'dpr'].includes(topic_word) && topic_word == value) {\n              splitTopic = {\n                id: child_bc.id,\n                name: child_bc.attributes.name,\n                image: process.env.REACT_APP_SECRET_CODE + child_bc.attributes.image.data.attributes.url,\n                link: child_bc.attributes.link\n              };\n            }\n          });\n        });\n        return splitTopic || false;\n      }\n    }))).filter(bcs => bcs), (await Promise.all(dprs.map(child_dpr => {\n      if (child_dpr.attributes.name.toLocaleLowerCase() == search.value.trim().toLowerCase()) {\n        return {\n          id: child_dpr.id,\n          name: child_dpr.attributes.name,\n          image: process.env.REACT_APP_SECRET_CODE + child_dpr.attributes.image.data.attributes.url,\n          link: child_dpr.attributes.link\n        };\n      } else {\n        let splitTopic = null;\n        const checkType = values.filter(value => value == 'bc');\n\n        if (checkType.length > 0) {\n          return false;\n        }\n\n        values.map(value => {\n          child_dpr.attributes.name.trim().toLowerCase().split(/[\\s,]+/).map(topic_word => {\n            if (!['bc', 'dpr'].includes(topic_word) && topic_word == value) {\n              splitTopic = {\n                id: child_dpr.id,\n                name: child_dpr.attributes.name,\n                image: process.env.REACT_APP_SECRET_CODE + child_dpr.attributes.image.data.attributes.url,\n                link: child_dpr.attributes.link\n              };\n            }\n          });\n        });\n        return splitTopic || false;\n      }\n    }))).filter(dprs => dprs), (await Promise.all(topics.map(topic => {\n      let results = [];\n\n      if (topic.attributes.name.toLowerCase().includes(search.value.toLowerCase()) || search.value.toLowerCase().includes(topic.attributes.name.toLowerCase())) {\n        const dprTopics = dpr_topics.filter(dpr => dpr.attributes.topic_id == topic.id);\n        const bcTopics = bc_topics.filter(bc => bc.attributes.topic_id == topic.id);\n        dprTopics.map(dprTopic => {\n          dprs.map(child_dpr => {\n            if (child_dpr.id == dprTopic.id) {\n              results = [...results, {\n                topic: topic.attributes.name,\n                name: child_dpr.attributes.name,\n                image: process.env.REACT_APP_SECRET_CODE + child_dpr.attributes.image.data.attributes.url,\n                link: child_dpr.attributes.link\n              }];\n            }\n          });\n        });\n        bcTopics.map(bcTopic => {\n          bcs.map(child_bc => {\n            if (child_bc.id == bcTopic.id) {\n              results = [...results, {\n                topic: topic.attributes.name,\n                name: child_bc.attributes.name,\n                image: process.env.REACT_APP_SECRET_CODE + child_bc.attributes.image.data.attributes.url,\n                link: child_bc.attributes.link\n              }];\n            }\n          });\n        });\n      }\n\n      return results.length > 0 ? results : false;\n    }))).filter(topics => topics)]);\n    const level = grade.length > 0 ? [grade[0]] : [];\n    const subject = major.length > 0 ? [major[0]] : [];\n    const result = grade.length > 0 ? [grade[0]] : major.length > 0 ? [major[0]] : [];\n    const multi = level.length > 0 && subject.length > 0;\n    const topicFound = await Promise.all([includes[0].map(row => {\n      console.log(row);\n      const filter = bc_topics.filter(bc => bc.attributes.bc_id == row.id);\n      const category = filter.length > 0 ? topics.filter(topic => topic.id == filter[0].attributes.topic_id) : false;\n      return {\n        name: row.name,\n        image: process.env.REACT_APP_SECRET_CODE + row.image.data.attributes.url,\n        link: row.link,\n        topic: category ? category.length > 0 ? category[0].attributes.name : null : null\n      };\n    }), includes[1].map(row => {\n      const filter = dpr_topics.filter(dpr => dpr.attributes.dpr_id == row.id);\n      const category = filter.length > 0 ? topics.filter(topic => topic.id == filter[0].attributes.topic_id) : false;\n      return {\n        name: row.name,\n        image: process.env.REACT_APP_SECRET_CODE + row.image.data.attributes.url,\n        link: row.link,\n        topic: category ? category.length > 0 ? category[0].attributes.name : null : null\n      };\n    }), ...includes[2]]);\n\n    if (multi) {\n      const results = await Promise.all([(await Promise.all(bcs.map(row => {\n        try {\n          if (row.attributes.grade_id == level[0].attributes.grade_id && row.attributes.major_id == subject[0].attributes.major_id) {\n            const filter = bc_topics.filter(bc => bc.id == row.id);\n            const category = filter.length > 0 ? topics.filter(topic => topic.id == filter[0].attributes.topic_id) : false;\n            return {\n              name: row.name,\n              image: process.env.REACT_APP_SECRET_CODE + row.image.data.attributes.url,\n              link: row.link,\n              topic: category ? category.length > 0 ? category[0].attributes.name : null : null\n            };\n          }\n\n          return false;\n        } catch (error) {\n          return false;\n        }\n      }))).filter(bcs => bcs), (await Promise.all(dprs.map(row => {\n        try {\n          if (row.attributes.grade_id == level[0].attributes.grade_id && row.attributes.major_id == subject[0].attributes.major_id) {\n            const filter = dpr_topics.filter(dpr => dpr.id == row.id);\n            const category = filter.length > 0 ? topics.filter(topic => topic.id == filter[0].attributes.topic_id) : false;\n            return {\n              name: row.name,\n              image: process.env.REACT_APP_SECRET_CODE + row.image.data.attributes.url,\n              link: row.link,\n              topic: category ? category.length > 0 ? category[0].attributes.name : null : null\n            };\n          }\n\n          return false;\n        } catch (error) {\n          return false;\n        }\n      }))).filter(dprs => dprs)]);\n      this.setState({\n        results\n      });\n    }\n\n    this.setState({\n      trigger: 'subject_res',\n      level,\n      subject,\n      topicFound,\n      result,\n      loading: false\n    });\n\n    if (this.state.result.length < 1) {\n      this.props.triggerNextStep({\n        trigger: 're_search'\n      });\n    } else {\n      if (multi) {\n        this.props.triggerNextStep({\n          trigger: 're_search'\n        });\n      } else {\n        if (topicFound[0].length > 0 || topicFound[1].length > 0 || topicFound.length > 2) {\n          this.props.triggerNextStep({\n            trigger: 're_search'\n          });\n        } else {\n          if (level.length > 0) {\n            this.props.triggerNextStep({\n              trigger: 'search_subject'\n            });\n          } else if (subject.length > 0) {\n            this.props.triggerNextStep({\n              trigger: 'search_level'\n            });\n          }\n        }\n      }\n    }\n  }\n\n  triggerNext() {\n    this.setState({\n      trigger: true\n    }, () => {\n      this.props.triggerNextStep();\n    });\n  }\n\n  render() {\n    const {\n      loading,\n      result,\n      results,\n      topicFound\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%'\n      },\n      children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 29\n      }, this) : topicFound[0].length > 0 || topicFound[1].length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {},\n        children: topicFound.map((bcdpr, parentI) => {\n          if (parentI == 0 || parentI == 1) {\n            return bcdpr.map((row, i) => {\n              const uuid = uuidv4();\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  paddingTop: 12\n                },\n                children: /*#__PURE__*/_jsxDEV(\"nav\", {\n                  className: \"accordion arrows\",\n                  style: {},\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"accordion\",\n                    id: `bcdpr-${parentI}-${i + 1}-${uuid}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 268,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n                    className: \"box\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"box-title\",\n                      htmlFor: `bcdpr-${parentI}-${i + 1}-${uuid}`,\n                      children: row.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"box-close\",\n                      htmlFor: \"acc-close\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 280,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"box-content\",\n                      children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                        children: row.topic\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 285,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: `${row.image}`,\n                        alt: \"img\",\n                        style: {\n                          width: \"100%\",\n                          height: \"100%\",\n                          borderRadius: \"10px\"\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 286,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                        children: /*#__PURE__*/_jsxDEV(\"a\", {\n                          href: row.link,\n                          className: \"link btn\",\n                          children: \"Lihat lebih banyak\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 291,\n                          columnNumber: 42\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 291,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 284,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"accordion\",\n                    id: \"acc-close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 27\n                }, this)\n              }, i + 1, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 27\n              }, this);\n            });\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 21\n      }, this) : topicFound.length > 2 && topicFound[2].length > 0 ? topicFound[2].map((row, i) => {\n        const uuid = uuidv4();\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            paddingTop: 12\n          },\n          children: /*#__PURE__*/_jsxDEV(\"nav\", {\n            className: \"accordion arrows\",\n            style: {},\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"accordion\",\n              id: `bcdpr-${i + 1}-${uuid}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n              className: \"box\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"box-title\",\n                htmlFor: `bcdpr-${i + 1}-${uuid}`,\n                children: row.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"box-close\",\n                htmlFor: \"acc-close\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                  children: row.topic\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${row.image}`,\n                  alt: \"img\",\n                  style: {\n                    width: \"100%\",\n                    height: \"100%\",\n                    borderRadius: \"10px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: row.link,\n                    className: \"link btn\",\n                    children: \"Lihat lebih banyak\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 42\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 35\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"accordion\",\n              id: \"acc-close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 29\n          }, this)\n        }, i + 1, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 25\n        }, this);\n      }) : results.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {},\n        children: results.map((bcdpr, parentI) => {\n          return bcdpr.map((row, i) => {\n            const uuid = uuidv4();\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: 12\n              },\n              children: /*#__PURE__*/_jsxDEV(\"nav\", {\n                className: \"accordion arrows\",\n                style: {},\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"accordion\",\n                  id: `bcdpr-${parentI}-${i + 1}-${uuid}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n                  className: \"box\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"box-title\",\n                    htmlFor: `bcdpr-${parentI}-${i + 1}-${uuid}`,\n                    children: row.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 35\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"box-close\",\n                    htmlFor: \"acc-close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 35\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"box-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                      children: row.topic\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 359,\n                      columnNumber: 39\n                    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: `${row.image}`,\n                      alt: \"img\",\n                      style: {\n                        width: \"100%\",\n                        height: \"100%\",\n                        borderRadius: \"10px\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 360,\n                      columnNumber: 39\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: row.link,\n                        className: \"link btn\",\n                        children: \"Lihat lebih banyak\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 365,\n                        columnNumber: 46\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 365,\n                      columnNumber: 39\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 358,\n                    columnNumber: 35\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"accordion\",\n                  id: \"acc-close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 35\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 31\n              }, this)\n            }, i + 1, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 31\n            }, this);\n          });\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 22\n      }, this) : result.length > 0 ? `${result[0].keyword} ditemukan, tambahkan kata kunci lainnya` : 'Mejakitabot tidak dapat menemukan apa yang kamu cari'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/Project/ReactJS/MejaKita - Chatbot/Chatbot/src/components/Search.js"],"names":["React","Component","Loading","keyword_grade","keyword_major","bc","bc_topic","dpr","dpr_topic","topic","v4","uuidv4","Search","constructor","props","state","loading","trigger","level","subject","result","results","topicFound","triggerNext","bind","componentWillMount","arrayBcs","bcs","arrayBc_topics","bc_topics","arrayDprs","dprs","arrayDpr_topics","dpr_topics","arrayTopics","topics","arrayKeyword_grades","keyword_grades","arrayKeyword_majors","keyword_majors","steps","search","values","value","trim","toLowerCase","split","grade","major","map","child_grade","includes","attributes","keyword","child_major","Promise","all","child_bc","name","toLocaleLowerCase","id","image","process","env","REACT_APP_SECRET_CODE","data","url","link","splitTopic","checkType","filter","length","topic_word","child_dpr","dprTopics","topic_id","bcTopics","dprTopic","bcTopic","multi","row","console","log","bc_id","category","dpr_id","grade_id","major_id","error","setState","triggerNextStep","render","width","bcdpr","parentI","i","uuid","paddingTop","height","borderRadius"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Loading } from 'react-simple-chatbot';\nimport { keyword_grade, keyword_major } from '../dummy/data.json';\nimport { bc, bc_topic, dpr, dpr_topic, topic } from '../dummy/data.json';\nimport \"../styles/accordion.css\";\nimport { v4 as uuidv4 } from 'uuid';\n\nexport default class Search extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n            trigger: false,\n            level: null,\n            subject: null,\n            result: [],\n            results: [],\n            topicFound: []\n        };\n\n        this.triggerNext = this.triggerNext.bind(this);\n    }\n\n    async componentWillMount() {\n\n        const arrayBcs = [this.props.bcs]\n        const arrayBc_topics = [this.props.bc_topics]\n        const arrayDprs = [this.props.dprs]\n        const arrayDpr_topics = [this.props.dpr_topics]\n        const arrayTopics = [this.props.topics]\n        const arrayKeyword_grades = [this.props.keyword_grades]\n        const arrayKeyword_majors = [this.props.keyword_majors]\n\n        const bcs = arrayBcs[0]\n        const bc_topics = arrayBc_topics[0]\n        const dprs = arrayDprs[0]\n        const dpr_topics = arrayDpr_topics[0]\n        const topics = arrayTopics[0]\n        const keyword_grades = arrayKeyword_grades[0]\n        const keyword_majors = arrayKeyword_majors[0]\n\n\n        const { steps } = this.props;\n        const { search } = steps;\n        const values = search.value.trim().toLowerCase().split(/[\\s,]+/)\n\n        let grade = []\n        let major = []\n\n        keyword_grades.map(child_grade => {\n            if (search.value.trim().toLowerCase().includes(child_grade.attributes.keyword.trim().toLowerCase())) grade = [child_grade.attributes]\n        })\n        keyword_majors.map(child_major => {\n            if (search.value.trim().toLowerCase().includes(child_major.attributes.keyword.trim().toLowerCase())) major = [child_major.attributes]\n        })\n\n        values.map(value => {\n            keyword_grades.map(child_grade => {\n                if (child_grade.attributes.keyword.trim().toLowerCase() === value) grade = [child_grade.attributes]\n            })\n            keyword_majors.map(child_major => {\n                if (child_major.attributes.keyword.trim().toLowerCase() === value) major = [child_major.attributes]\n            })\n        })\n\n        const includes = await Promise.all([\n            (await Promise.all(bcs.map(child_bc => {\n                if (child_bc.attributes.name.toLocaleLowerCase() == search.value.trim().toLowerCase()) {\n                    return { \n                        id: child_bc.id, \n                        name: child_bc.attributes.name, \n                        image: process.env.REACT_APP_SECRET_CODE + child_bc.attributes.image.data.attributes.url, \n                        link: child_bc.attributes.link }\n                } else {\n                    let splitTopic = null\n\n                    const checkType = values.filter(value => value == 'dpr')\n                    if (checkType.length > 0) {\n                        return false\n                    }\n\n                    values.map(value => {\n                        child_bc.attributes.name.trim().toLowerCase().split(/[\\s,]+/).map(topic_word => {\n                            if (!['bc', 'dpr'].includes(topic_word) && topic_word == value) {\n                                splitTopic = { \n                                    id: child_bc.id, \n                                    name: child_bc.attributes.name, \n                                    image: process.env.REACT_APP_SECRET_CODE + child_bc.attributes.image.data.attributes.url, \n                                    link: child_bc.attributes.link }\n                            }\n                        })\n                    })\n                    return splitTopic || false\n                }\n            }))).filter(bcs => bcs),\n            (await Promise.all(dprs.map(child_dpr => {\n                if (child_dpr.attributes.name.toLocaleLowerCase() == search.value.trim().toLowerCase()) {\n                    return { \n                        id: child_dpr.id, \n                        name: child_dpr.attributes.name, \n                        image: process.env.REACT_APP_SECRET_CODE + child_dpr.attributes.image.data.attributes.url, \n                        link: child_dpr.attributes.link }\n                } else {\n                    let splitTopic = null\n\n                    const checkType = values.filter(value => value == 'bc')\n                    if (checkType.length > 0) {\n                        return false\n                    }\n\n                    values.map(value => {\n                        child_dpr.attributes.name.trim().toLowerCase().split(/[\\s,]+/).map(topic_word => {\n                            if (!['bc', 'dpr'].includes(topic_word) && topic_word == value) {\n                                splitTopic = { \n                                    id: child_dpr.id, \n                                    name: child_dpr.attributes.name, \n                                    image: process.env.REACT_APP_SECRET_CODE + child_dpr.attributes.image.data.attributes.url, \n                                    link: child_dpr.attributes.link }\n                            }\n                        })\n                    })\n                    return splitTopic || false\n                }\n            }))).filter(dprs => dprs),\n            (await Promise.all(topics.map(topic => {\n                let results = []\n                if (topic.attributes.name.toLowerCase().includes(search.value.toLowerCase()) || search.value.toLowerCase().includes(topic.attributes.name.toLowerCase())) {\n                    const dprTopics = dpr_topics.filter(dpr => dpr.attributes.topic_id == topic.id)\n                    const bcTopics = bc_topics.filter(bc => bc.attributes.topic_id == topic.id)\n\n                    dprTopics.map(dprTopic => {\n                        dprs.map(child_dpr => {\n                            if (child_dpr.id == dprTopic.id) {\n                                results = [...results, { \n                                    topic: topic.attributes.name, \n                                    name: child_dpr.attributes.name, \n                                    image: process.env.REACT_APP_SECRET_CODE + child_dpr.attributes.image.data.attributes.url, \n                                    link: child_dpr.attributes.link }]\n                            }\n                        })\n                    })\n\n                    bcTopics.map(bcTopic => {\n                        bcs.map(child_bc => {\n                            if (child_bc.id == bcTopic.id) {\n                                results = [...results, { \n                                    topic: topic.attributes.name, \n                                    name: child_bc.attributes.name, \n                                    image: process.env.REACT_APP_SECRET_CODE + child_bc.attributes.image.data.attributes.url, \n                                    link: child_bc.attributes.link }]\n                            }\n                        })\n                    })\n                }\n                return results.length > 0 ? results : false\n            }))).filter(topics => topics),\n        ])\n\n        const level = grade.length > 0 ? [grade[0]] : []\n        const subject = major.length > 0 ? [major[0]] : []\n        const result = grade.length > 0 ? [grade[0]] : (major.length > 0 ? [major[0]] : [])\n        const multi = level.length > 0 && subject.length > 0\n\n        const topicFound = await Promise.all([\n            includes[0].map(row => {\n                console.log(row)\n                const filter = bc_topics.filter(bc => bc.attributes.bc_id == row.id)\n                const category = filter.length > 0 ? topics.filter((topic) => topic.id == filter[0].attributes.topic_id) : false\n                return {\n                    name: row.name,\n                    image: process.env.REACT_APP_SECRET_CODE + row.image.data.attributes.url,\n                    link: row.link,\n                    topic: category ? (category.length > 0 ? category[0].attributes.name : null) : null\n                }\n            }),\n            includes[1].map(row => {\n                const filter = dpr_topics.filter(dpr => dpr.attributes.dpr_id == row.id)\n                const category = filter.length > 0 ? topics.filter((topic) => topic.id == filter[0].attributes.topic_id) : false\n                return {\n                    name: row.name,\n                    image: process.env.REACT_APP_SECRET_CODE + row.image.data.attributes.url,\n                    link: row.link,\n                    topic: category ? (category.length > 0 ? category[0].attributes.name : null) : null\n                }\n            }),\n            ...includes[2]\n        ])\n\n        if (multi) {\n            const results = await Promise.all([\n                (await Promise.all(bcs.map(row => {\n                    try {\n                        if (row.attributes.grade_id == level[0].attributes.grade_id && row.attributes.major_id == subject[0].attributes.major_id) {\n                            const filter = bc_topics.filter(bc => bc.id == row.id)\n                            const category = filter.length > 0 ? topics.filter((topic) => topic.id == filter[0].attributes.topic_id) : false\n                            return {\n                                name: row.name,\n                                image: process.env.REACT_APP_SECRET_CODE + row.image.data.attributes.url,\n                                link: row.link,\n                                topic: category ? (category.length > 0 ? category[0].attributes.name : null) : null\n                            }\n                        }\n                        return false\n                    } catch (error) {\n                        return false\n                    }\n                }))).filter(bcs => bcs),\n                (await Promise.all(dprs.map(row => {\n                    try {\n                        if (row.attributes.grade_id == level[0].attributes.grade_id && row.attributes.major_id == subject[0].attributes.major_id) {\n                            const filter = dpr_topics.filter(dpr => dpr.id == row.id)\n                            const category = filter.length > 0 ? topics.filter((topic) => topic.id == filter[0].attributes.topic_id) : false\n                            return {\n                                name: row.name,\n                                image: process.env.REACT_APP_SECRET_CODE + row.image.data.attributes.url,\n                                link: row.link,\n                                topic: category ? (category.length > 0 ? category[0].attributes.name : null) : null\n                            }\n                        }\n                        return false\n                    } catch (error) {\n                        return false\n                    }\n                }))).filter(dprs => dprs),\n            ])\n            this.setState({ results });\n        }\n        this.setState({ trigger: 'subject_res', level, subject, topicFound, result, loading: false });\n\n        if (this.state.result.length < 1) {\n            this.props.triggerNextStep({ trigger: 're_search' })\n        } else {\n            if (multi) {\n                this.props.triggerNextStep({ trigger: 're_search' });\n            } else {\n                if (topicFound[0].length > 0 || topicFound[1].length > 0 || topicFound.length > 2) {\n                    this.props.triggerNextStep({ trigger: 're_search' });\n                } else {\n                    if (level.length > 0) {\n                        this.props.triggerNextStep({ trigger: 'search_subject' })\n                    } else if (subject.length > 0) {\n                        this.props.triggerNextStep({ trigger: 'search_level' })\n                    }\n                }\n            }\n        }\n    }\n\n    triggerNext() {\n        this.setState({ trigger: true }, () => {\n            this.props.triggerNextStep();\n        });\n    }\n\n    render() {\n        const { loading, result, results, topicFound } = this.state;\n        return (\n            <div style={{ width: '100%' }}>\n                { loading ? <Loading /> : (topicFound[0].length > 0 || topicFound[1].length > 0 ? (\n                    <div style={{}}>\n                    {topicFound.map((bcdpr, parentI) => {\n                        if(parentI == 0 || parentI == 1) {\n                      return bcdpr.map((row, i) => {\n                          const uuid = uuidv4()\n                          return (\n                          <div key={i + 1} style={{ paddingTop: 12 }}>\n                          <nav className=\"accordion arrows\" style={{}}>\n                              <input\n                              type=\"radio\"\n                              name=\"accordion\"\n                              id={`bcdpr-${parentI}-${i + 1}-${uuid}`}\n                              />\n                              <section className=\"box\">\n                              <label\n                                  className=\"box-title\"\n                                  htmlFor={`bcdpr-${parentI}-${i + 1}-${uuid}`}\n                              >\n                                  {row.name}\n                              </label>\n                              <label\n                                  className=\"box-close\"\n                                  htmlFor=\"acc-close\"\n                              ></label>\n                              <div className=\"box-content\">\n                                  <small>{row.topic}</small>\n                                  <img\n                                  src={`${row.image}`}\n                                  alt=\"img\"\n                                  style={{ width: \"100%\", height: \"100%\", borderRadius: \"10px\" }}\n                                  />\n                                  <small><a href={row.link} className='link btn'>Lihat lebih banyak</a></small>\n                              </div>\n                              </section>\n                              <input type=\"radio\" name=\"accordion\" id=\"acc-close\" />\n                          </nav>\n                          </div>\n                          )\n                      });\n                }})}\n                </div>\n                ) : (topicFound.length > 2 && topicFound[2].length > 0 ? (\n                    topicFound[2].map((row, i) => {\n                        const uuid = uuidv4()\n                        return (\n                        <div key={i + 1} style={{ paddingTop: 12 }}>\n                            <nav className=\"accordion arrows\" style={{}}>\n                                <input\n                                type=\"radio\"\n                                name=\"accordion\"    \n                                id={`bcdpr-${i + 1}-${uuid}`}\n                                />\n                                <section className=\"box\">\n                                <label\n                                    className=\"box-title\"\n                                    htmlFor={`bcdpr-${i + 1}-${uuid}`}\n                                >\n                                    {row.name}\n                                </label>\n                                <label className=\"box-close\" htmlFor=\"acc-close\"></label>\n                                <div className=\"box-content\">\n                                    <small>{row.topic}</small>\n                                    <img\n                                    src={`${row.image}`}\n                                    alt=\"img\"\n                                    style={{ width: \"100%\", height: \"100%\", borderRadius: \"10px\" }}\n                                    />\n                                  <small><a href={row.link} className='link btn'>Lihat lebih banyak</a></small>\n                                </div>\n                                </section>\n                                <input type=\"radio\" name=\"accordion\" id=\"acc-close\" />\n                            </nav>\n                        </div>\n                     ) })\n                ) : (results.length > 0 ?\n                    (<div style={{}}>\n                        {results.map((bcdpr, parentI) => {\n                          return bcdpr.map((row, i) => {\n                              const uuid = uuidv4()\n                              return (\n                              <div key={i + 1} style={{ paddingTop: 12 }}>\n                              <nav className=\"accordion arrows\" style={{}}>\n                                  <input\n                                  type=\"radio\"\n                                  name=\"accordion\"\n                                  id={`bcdpr-${parentI}-${i + 1}-${uuid}`}\n                                  />\n                                  <section className=\"box\">\n                                  <label\n                                      className=\"box-title\"\n                                      htmlFor={`bcdpr-${parentI}-${i + 1}-${uuid}`}\n                                  >\n                                      {row.name}\n                                  </label>\n                                  <label\n                                      className=\"box-close\"\n                                      htmlFor=\"acc-close\"\n                                  ></label>\n                                  <div className=\"box-content\">\n                                      <small>{row.topic}</small>\n                                      <img\n                                      src={`${row.image}`}\n                                      alt=\"img\"\n                                      style={{ width: \"100%\", height: \"100%\", borderRadius: \"10px\" }}\n                                      />\n                                      <small><a href={row.link} className='link btn'>Lihat lebih banyak</a></small>\n                                  </div>\n                                  </section>\n                                  <input type=\"radio\" name=\"accordion\" id=\"acc-close\" />\n                              </nav>\n                              </div>\n                              )\n                          });\n                          })}\n                    </div>) : (result.length > 0 ? `${result[0].keyword} ditemukan, tambahkan kata kunci lainnya` : 'Mejakitabot tidak dapat menemukan apa yang kamu cari'))))}\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}